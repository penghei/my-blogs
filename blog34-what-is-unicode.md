---
title: 各种编码都是什么
date: 2021-12-30 20:28:12
tags: 日常学习
cover:
categories: 其他知识
---

# ASCII

最基本的编码标准，用八位二进制（一个字节）表示 128 个字符，包括大小写字母和各种英文符号（基本上键盘上的所有）和一些控制符
为了应付一些欧美拼音文字的扩展，还有 ISO8859-1（256 个字符）等编码的产生，主要就是在 ASCII 基础上的扩展

# 多字节编码

如果想匹配多于 256 个字符的语言，一个字节显然不够，用两个字节的话，16 比特，可以编码 65536 个字符，BIG-5 就是一个双字节编码方式，它包括大多数中文繁体字，GB18030 则包括繁体和简体

## GB2312 编码

- 概念：GB2312 编码是第一个汉字编码国家标准，共收录汉字 6763 个，同时收录了包括拉丁字母、希腊字母、日文平假名及片假名字母、俄语西里尔字母在内的 682 个全角字符。
- 特点：GB2312 就是我们常说的**区位码**表示方法，共 94 个区，每区含有 94 个位，共 8836 个码位，每个对应一个字符或控制字符
- 范围：0101－9494；编码时第一个字节为“高字节”，对应 94 个区；第二个字节为“低字节”，对应 94 个位。

## GBK

- 概念：是对 GB2312 的扩展，依然是区位码，可以和 Unicode 做一一对应；GBK 是 windows 默认采用的中文编码方式
- 范围：8140-FEFE，首字节在 81-FE 之间，尾字节在 40-FE 之间，剔除 xx7F 一条线。总计 23940 个码位，共收入 21886 个汉字和图形符号

## BIG5

- 概念：繁体中文的编码标准
- 范围：和 GBK 一致

## GB18030

- 概念：GBK 的扩展，在基础上加入了日文、少数民族文字等；现在使用的国标标准码就是 GB18030-2005

# 统一编码 Unicode

ASCII 对于一些文字不够，但是统一使用多字节又会使字节少的字符浪费很多空间；因此可以考虑统一编码 Unicode
Unicode 实际上是一个表， 为世界上每种语言中的每个字符设定了统一并且**唯一**的码位。但他只是一个标准，具体编码方案是 utf-8 等，规定使用几个字节存储
在表示一个 Unicode 的字符时，通常会用“U+”然后紧接着一组十六进制的数字来表示这一个字符；比如`U+0041`总是表示 A

![](https://pic1.zhimg.com/80/v2-7470bd95ac475781e87fa8a05e77f6d8_720w.jpg)

## UTF-8

UTF-8 是 Unicode 的一种实现方式，是一种变长编码，根据不同的 Unicode 字符,用 1 到 6 个字节编码
具体实现如下：

1. 单字节的字符，字节的第一位设为 0，对于英语文本，UTF-8 码只占用一个字节，和 ASCII 码完全相同；
2. n 个字节的字符(n>1)，第一个字节的前 n 位设为 1，第 n+1 位设为 0，后面字节的前两位都设为 10，这 n 个字节的其余空位填充该字符 unicode 码，高位用 0 补足。这样就形成了如下的 UTF-8 标记位：

```
0xxxxxxx
110xxxxx 10xxxxxx
1110xxxx 10xxxxxx 10xxxxxx  汉字一般都是三个字节存储
11110xxx 10xxxxxx 10xxxxxx 10xxxxxx
111110xx 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx
1111110x 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx
最长为6个字节
```

## UTF-16

将 Unicode 中最常用的 0-65535 字符编码成 2 个字节（2^16 - 1），超出的用 4 个字节编码
UTF16 编码是 Unicode 最直接的实现方式，windows 上新建文本文件后保存为 Unicode 编码其实就是保存为 UTF16 编码。

## UTF-32

把 unicode 所有都用 4 个字节表示，很浪费空间

## 在程序中的体现

在 URL 中不属于 URL 规定的字符之外的字符一般表示为`%xx` 的形式，根据浏览器、请求的不同有不同的体现
比如汉字“春节”，在 URL 的中出现会被不同的浏览器解析成不同格式；

- 可以使用 UTF-8 解析，那么字符就是`%E6%98%A5%E8%8A%82`，`%E6%98%A5`表示“春”，后三个表示“节”
- 在 query 参数中的汉字会被根据 GB2312 解析成`%xx`的形式，用的是操作系统的默认编码。
- 在网页上用 get 或 post 方法的请求会根据 html 的编码确定，体现在`<meta http-equiv="Content-Type" content="text/html;charset=xxxx">`的 charset 中

而 js 对于汉字编码一般是`%uxxxx`或者`\uxxxx`的形式，是字符具体的 Unicode 编码

# 乱码

当打开的编码标准和源标准不一样就会产生乱码。一般情况下 ASCII 中的字符不会产生乱码，而其他标准的字符会被解释成各种不同的样子，就是乱码
操作系统会把 UTF-8 格式的编码先转换为 unicode 格式，然后用 GBK 编码表中对应编码解码为汉字。  
比如最常见的锟斤拷烫烫烫，就是 UTF8 和 GBK 的转换问题；当转换为 UTF8 时如果没有对应的就会选择占位符 U+FFFD，即`?`
如果后面的一堆都无法匹配，就会形成 EF BF BD EF BF BD EF BF BD EF BF BD.....这样的序列，着三个重复的字符在 GBK 中分别对应锟、斤、拷
