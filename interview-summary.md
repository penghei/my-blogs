# 基本思路

静下心来慢慢来 不要浮躁
不要看手机！！
不要看手机！！
不要看手机！！

# 面试复盘

## txmusic

自我介绍，打草稿，要包括学校、公司，以及可以提一下自己擅长什么（konva）
部分开放问题回答的注意：
为什么离开字节？业务变动，hc 不够，不能转正
为什么想实习？不能答想要导师，要答学习技术、架构、学习与人协作
自己擅长/不擅长？可以答“稍微会一点”，然后引导比如 react 源码、konva 实现、webpack 配置等方面。
项目难点
第一个项目
比如 konva，不要说自己用了 konva，要说即使用了 konva，还有什么问题。
比如项目里，点击一个点位选中点位，点击其他地方取消选中，这个“其他地方”的事件监听到底是在 stage 上还是 layer 上，还是外面的 div 元素上？然后引出自己看的源码。
还有一个可以说的，就是事件系统，比如事件冒泡这个东西，可以说自己点子元素的时候父元素的事件也被触发了（那个实时地图，点机器人的时候地图自己也会出现一个点位），然后了解到事件是有冒泡的（也是看源码），找到事件冒泡的阻止方案
还可以说 eslint plugin 的编写，比如怎么用 ast 编写的，或者这个 plugin 的实际使用效果。
第二个项目
可以说首次加载时间长，比如白屏这样的问题，依靠代码分割、减小首页体积、按需加载其他库等方式解决
如果实在要说，还考虑提一下 loader

## 美团到店一面

答得依托答辩
主要原因是之前没注意 js 基础。对于 js 输出题很久没练了，答得很差，影响了心态，以至于最后的算法题也答得不是很好。
总结：还是要注意 js 基础，每个基础都要注意，不要觉得不会考或者自己自信就完全放掉。尤其是对于输出题目，还有就是类似 css 的一些题目。在牛客上赶紧多刷刷，好好复习 js 以及 css 的一些内容。

## tx 微信读书一面

- 问项目
  - 提到了 konva 有没有对 canvas 脏渲染作处理
- 八股
  - react 旧虚拟 dom 有什么问题
  - react fiber 详述
  - react 为什么采用 MessageChannel
  - react 认为自己的任务应该执行多久（5ms、20ms）
  - RN 了解过吗（被问了好几次 RN 了，感觉现在 RN 用的不少）
  - js 继承方式（组合寄生那些）
    - 如果想对每个 function 的执行都实现一个“拦截”效果，可以怎么做（覆写 Function.prototype.call）
  - tcp 报文头结构
    - 校验和，什么原理
  - TTL，有什么用（说了 MSL 的作用）
- 算法，只说了思路，没写代码

## 淘系一面

- （看了博客）博客有什么性能问题（答了用 lighthouse 测试，加载时间慢，CLS 比较大）
- 博客搭建中的难点
- 网页性能监控的方式（答了 lighthouse 和 performance 监控的方式）
  - 追问：这两种方式有什么优缺点，适用于哪些场景（performance 在线上也应该保留，记录用户数据）
- 对于博客的性能问题怎么解决（减少重绘重排，分页加载，懒加载图片）
  - 追问：如果不允许实现分页，怎么减小加载的长度（懒加载页面，到可视区域再加载）
  - 追问：如果每次页面划到底部再加载新的，那么上面的怎么回收（答的类似虚拟列表的方式，把页面分块然后每次只显示几块）
- ssr 了解吗
- ssr 的优势
- ssr 的缺点（答了对服务端性能负载大，并且因为是预请求数据，可能不适用于需要频繁更新的页面）
- 跨域
  - 为什么有跨域
  - 解决和原理
- 项目上的问题
  - 一个秒杀系统前端要做什么（减少请求，降低次数，对服务端可能的崩溃做预案）
- 假如让你设计秒杀系统的后端，你会怎么设计（分布式，负载均衡，不太懂后端）
  - 对于单个服务端来说，假如一瞬间有 100 个请求，怎么处理（过滤，只处理 10 个，或者依次处理）
  - 如果只处理 10 个，但这 10 个人有些没有执行最终的购买，怎么办（继续接收其他请求，相当于秒杀的产品没有被买）

# 自我介绍模板

面试官好，我叫赵梓轩，来自电子科技大学，我的专业是软件工程，目前是大三。

我学习前端大概有一年半左右的时间了。我第一次接触前端是通过学校工作室学长的带领，感觉到自己对前端比较感兴趣，并且后续在和其他同学参与项目的过程中都是前端开发的角色，因此选择从事前端这个方向。

我曾在字节跳动实习过三个月左右的时间，实习期间主要负责机器人超管平台前端的开发工作，和后端、产品、测试等同学配合完成了多个任务排期，使得超管平台项目功能更加完善和丰富。在项目开发过程中我参与了部分技术选型，针对项目中的问题采取了一些解决方案；

比如针对项目中需要绘制地图的需求，我选择了 konva 来实现，因为 konva 为 canvas 提供了完备的事件系统，帮助解决了需要 canvas 交互的问题。我对 konva 事件系统的实现也比较感兴趣，因此通过阅读源码的方式了解了 konva 的事件系统的简单原理。

比如针对项目中的状态管理问题，我详细了解了 redux，并调研了 recoil、mobx、zustand、jotai 等其他状态管理解决方案，最后综合项目的实际应用情况选择了 recoil。

贵公司在前端领域有着不小的名气，我对贵公司也十分向往，也很感谢贵公司能给我这次面试机会。

# 其他散知识点

在这里记一下时不时想起来要复习到的散的知识点

^git 工作流、事件流这些，gitflow（好像叫这个）
react-konva 怎么把 react 组件渲染到 canvas 里边的，类似的实现库 react-pdf、inc
math.random 的安全问题？
部分 ts 的工具类型，以及 ts 泛型函数的写法再好好看看
模块化对循环依赖的解决方案（这个之前有文档）
^手写类似 dayjs 的时间转化功能
虚拟列表的实现
mvc、mvvm 这些，之前看过后面没太记住
优化版的防抖节流
关于登录注册方面的，比如 token 的刷新之类的
rbac 模型（看到过好多次，暂时不知道是什么东西）
async pool
canvas 性能问题，（比如：在高清屏幕上绘制模糊问题）
canvas 怎么实现橡皮
文件下载的注意事项：使用 URL.createObjectURL(blob)生成的 url 需要使用 URL.revokeObjectURL(link.href)解除，否则会内存泄漏
怎么判断一个事件的触发是在容器内还是容器外（捕获事件，然后 element.contains api）
性能优化中的 http 优化：gzip 等压缩相关的
大文件上传（分片）
web 安全：其他攻击方式，比如中间人攻击、ddos 攻击等。xss 攻击的防范，对用户字符串转义。referer 头部以及在 csrf 中的作用
前端上线之后对错误的捕获上报方式
埋点相关的

绘制很多节点，怎么优化。比如 canvas 上绘制；如果想要只绘制可视区域，怎么操作
安卓 app 对跨域的限制（浏览器独有，原生 app 没有限制。如果使用 webview 就有限制）
cdn 和 cookie 的关系（cdn 服务器依靠 cookie 来确定返回缓存资源还是新的资源）
不使用 js，怎么实现懒加载？（img 元素的 loading 属性）
querySelector 函数查找 dom 元素采用的是 bfs 还是 dfs（查找 dom 的函数都是 bfs，最近的元素）
sort 函数采用哪种排序方式？（数组长度不超过 10 时，使用插入排序。长度超过 10 使用快速排序。）

前沿技术
发布一个库需要注意什么

# 秋招-字节 dcd 一面

没答好的：

- 首屏组件的界定，如果可能不在首屏怎么办，怎么确定在首屏
- priority 组件的效果，都已经挂载了还有必要延迟吗？
- redux 中间件原理、异步形式如何实现，redux 在项目中只是当做 eventBus？
- 错误监控方式，如何全局处理 js 错误、promise 错误。window.onerror 和 window.addEventListener('error')的区别
- h5 页面的优化，如果把 h5 投放到端内，端内有哪些独特的性能优化方式

主要还是偏向预请求、直出等方面
https://xiaobaiha.gitbook.io/tech-share/engineering/c-duan-xing-neng-you-hua
https://heapdump.cn/article/3676881

- 如果要实现一个蒙层，中间 100\*100 挖空，有什么方式（独特处理）

https://juejin.cn/post/6844903919059992584
基本思路是通过一个元素把中间区域盖住，然后用这个元素的 border 或者 box-shadow 来作为蒙层，这个元素本身是透明的。

- flatlist 分为几个部分，比如有空白区域、可视区域等等

![](https://files.imgdb.cn/static/images/59/37/649172e11ddac507cc145937.jpg?n=y19y9s9k&s=0dae8996&t=64c515ba)

参考如上，主要分为 8 个区域，上方 4 个，中间的可视区，和下方的三个。
初始列表项、上方空白区、windowSize 区域、可视区、下方空白区。
这张图上绿色的部分也可以看做是可视区域内的一部分，因此也可以说是上方 3 个下方 2 个，总共 6 个区域。

- React 如果一个状态嵌入特别深，在一个很深的层级内去更新，可能会出现不能及时更新的情况，或者更新消耗过大，怎么优化？（没太听懂这个问题，但是他说的解决方案是 deepClone 一个状态确保更新，我附加答了一个 immutable）
- FMP 的计算方式

# 百度一面

没答好的：

- package-lock.json 锁版本号的意义，如果在 package.json 中写死会怎么样？

lock 锁版本号主要是为了保证依赖版本可用，并且包含 package 的直接依赖和间接依赖（库自己的依赖）
如果想要更新，需要手动修改 package.json 中的版本号
并不是说在 package 里锁了在 lock 中就不用锁了。package 里写死只能保证这个依赖没有问题，他的子依赖仍然可能出现版本不固定的情况

- 性能监控和错误监控上报的方式，除了发请求之外还有什么特别的方法？
- ts infer 的使用
- 手写题：

```js
const html = parse("<div>{{content}}, my name is {{ user.name }}</div>", {
  content: "hello",
  user: {
    name: "foo",
  },
});
```

# 百度二面

没答好的：

- 组件库设计，包括：
  - 如何实现一个跨框架的组件库或单个组件，比如 React、Vue 和原生 html 的？单个组件如何设计，整个组件库如何设计
  - 跨框架组件如何打包
- 算法：最大矩形面积那个，单调栈方法又没做出来`:(`

# 百度三面

三面问的不深，但是回答过程中有一些问题

- 优化结果的具体值，比如包体积、加载时间，这些值编出来应该要更加准确一些，不能乱编。3000ms 优化前可能差不多，但是优化后 2000ms 这个可能幅度有点大，在没有后端参与的情况下只靠前端能优化这么多有可能有点假
- 优化方式的理解还得加深，当前说的还是有点太浅了，尤其是对分步渲染这个，一定要想明白是怎么回事。比如说分步渲染的效果是什么，和骨架屏的关系，如果被延迟渲染的组件内还有请求怎么处理
- 优化方案的参与度，我参与了哪些工作，占比多少，也就是具体做的内容
- 为什么用 rn，rn 相比于 h5 有什么优势，这些跨端方案各自的优缺点？

# 练手面试

- 知乎实习一面
  - 还是 priority 组件，怎么去触发下一个组件的渲染？如果不通过手动执行的方式，有没有一些兜底？比如组件网络请求之后才触发下一个优先级的组件渲染，那么假如没有请求成功，怎么处理？
  - ts 问题
    - 怎么生成一个包含任意索引的 type 的类型，工具方法？（Record）
    - Pick 方法
    - async 函数的 ts 类型是什么
  - react 问题
    - react state 闭包问题，注意是在事件或定时器内部，通过`setState(newState => {...})`解决
